<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JACOB'S ARCADE V2</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
/* FULL ORIGINAL ARCADE STYLE (kept intact) */
:root {
  --neon-blue:#00e6ff;
  --neon-green:#7cff00;
  --bg-color:#05030a;
  --bg-opacity:0.85;
  --verse-bg-opacity:0.02;
  --verse-text-color:#dffcff;
  --game-bg-opacity:0.01;
  --game-text-color:#00e6ff;
  --star-opacity:0.25;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;font-family:"Press Start 2P",Arial,sans-serif;color:#e6faff;background:var(--bg-color);overflow-x:hidden;}
body::before,body::after{content:"";position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:-2;}
body::before{background:radial-gradient(rgba(255,255,255,var(--star-opacity)) 1px,transparent 1px);background-size:2px 2px;}
body::after{background:radial-gradient(circle at 20% 10%, rgba(0,255,200,0.06), transparent 10%),radial-gradient(circle at 80% 70%, rgba(0,150,255,0.04), transparent 10%);opacity:0.85;filter:blur(40px) saturate(120%);}
header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:rgba(0,0,0,0.25);border-bottom:1px solid rgba(255,255,255,0.04);backdrop-filter:blur(6px);}header .title{display:flex;align-items:center;gap:12px;}header .logo{width:48px;height:48px;background:linear-gradient(135deg,var(--neon-blue),var(--neon-green));border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:bold;color:#001;}header h1{font-size:18px;color:var(--neon-blue);letter-spacing:1px;text-transform:uppercase;}header .live-clock{font-size:12px;color:var(--neon-green);}#customize-btn{position:fixed;top:16px;right:16px;z-index:1001;background:var(--neon-green);color:#000;font-size:12px;padding:6px 10px;border-radius:6px;cursor:pointer;border:none;box-shadow:0 0 8px var(--neon-green);}#customize-btn:hover{box-shadow:0 0 16px var(--neon-green);}main{display:flex;flex-wrap:wrap;padding:24px;gap:24px;}.left{flex:1 1 500px;}#custom-panel{position:fixed;top:0;right:-320px;width:300px;height:100%;background:rgba(0,0,0,var(--bg-opacity));padding:18px;border-radius:10px 0 0 10px;box-shadow:-4px 0 20px rgba(0,0,0,0.3);transition:right 0.3s ease;z-index:1000;}#custom-panel.open{right:0;}.clock{font-size:24px;color:var(--neon-green);margin-bottom:12px;text-transform:uppercase;}.next-update{font-size:10px;color:#dffcff;margin-bottom:14px;text-transform:uppercase;}.verse-box{background:rgba(255,255,255,var(--verse-bg-opacity));padding:16px;border-radius:8px;min-height:100px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.04);} .verse-text{font-size:12px;color:var(--verse-text-color);line-height:1.4;text-transform:uppercase;} .verse-ref{font-size:10px;color:var(--neon-blue);margin-top:8px;text-align:right;opacity:0.85;text-transform:uppercase;} .games{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;} .game-card{background:rgba(255,255,255,var(--game-bg-opacity));padding:12px;border-radius:8px;text-align:center;border:1px solid rgba(255,255,255,0.03);transition: transform 0.15s, box-shadow 0.15s;} .game-card:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 8px 24px rgba(0,200,255,0.06);} .card-buttons{margin-top:6px;display:flex;gap:4px;justify-content:center;flex-wrap:wrap;} .card-buttons button{font-size:10px;padding:4px 6px;cursor:pointer;border-radius:4px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--neon-blue);text-transform:uppercase;} footer{margin-top:32px;padding:18px;background:rgba(0,0,0,0.25);border-radius:8px;text-align:center;font-size:12px;color:#dffcff;text-transform:uppercase;}footer .socials a{margin:0 8px;color:var(--neon-blue);text-decoration:none;text-transform:uppercase;}

/* LOGIN SYSTEM */
#login-screen,#signup-screen,#access-granted{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);display:flex;justify-content:center;align-items:center;z-index:3000;}#access-granted{color:#00ff55;font-size:28px;animation:fadeOut 1.6s forwards 1.2s;} .hidden{display:none!important;} .login-box{background:#111;padding:24px;border:2px solid var(--neon-blue);border-radius:10px;width:320px;text-align:center;} .login-box input{width:90%;padding:6px;margin-top:8px;font-size:12px;} .login-btn{background:var(--neon-green);border:none;padding:8px 16px;margin-top:12px;cursor:pointer;} @keyframes fadeOut{from{opacity:1;}to{opacity:0;visibility:hidden;}}
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <div class="login-box">
    <h3>LOGIN</h3>
    <input id="login-username" placeholder="USERNAME">
    <input id="login-password" type="password" placeholder="PASSWORD">
    <p id="login-error" style="color:red;font-size:10px;height:12px;margin-top:6px;" class="hidden">WRONG USERNAME OR PASSWORD</p>
    <button class="login-btn" onclick="attemptLogin()">LOGIN</button>
    <p style="font-size:10px;margin-top:10px;">No account? <span style="color:var(--neon-blue);cursor:pointer;" onclick="showSignup()">SIGN UP</span></p>
  </div>
</div>

<!-- SIGNUP SCREEN -->
<div id="signup-screen" class="hidden">
  <div class="login-box">
    <h3>SIGN UP</h3>
    <input id="signup-username" placeholder="CREATE USERNAME">
    <input id="signup-password" type="password" placeholder="CREATE PASSWORD">
    <button class="login-btn" onclick="attemptSignup()">CREATE ACCOUNT</button>
    <p style="font-size:10px;margin-top:10px;">Have an account? <span style="color:var(--neon-blue);cursor:pointer;" onclick="showLogin()">LOGIN</span></p>
  </div>
</div>

<!-- ACCESS GRANTED -->
<div id="access-granted" class="hidden">ACCESS GRANTED</div>

<!-- FULL ARCADE -->
<div id="site-content" class="hidden">
<header>
  <div class="title"><div class="logo">J²</div><h1>JACOB'S ARCADE V2</h1></div>
  <div class="live-clock" id="header-clock">00:00:00</div>
</header>

<button id="customize-btn">CUSTOMIZE</button>

<main>
  <div class="left">
    <div class="clock" id="live-time">00:00:00</div>
    <div class="next-update">NEXT UPDATE → <span id="next-update-time">CALCULATING...</span><br>(EVERY SATURDAY)</div>

    <div class="verse-box" aria-live="polite">
      <div class="verse-text" id="verse-text">LOADING VERSE…</div>
      <div class="verse-ref" id="verse-ref">—</div>
    </div>

    <div class="panel-section"><label>SEARCH GAMES</label><input type="text" id="search-games" placeholder="TYPE TO SEARCH..."></div>
    <div class="games" id="games"></div>
  </div>

  <div id="custom-panel">
    <h3 style="color:var(--neon-green);font-size:14px;margin-bottom:12px;">CUSTOMIZE</h3>
    <!-- (custom panel content kept minimal to avoid changing layout) -->
    <div class="panel-section"><label>NEON COLOR</label><input type="color" id="neonPicker" value="#00e6ff"></div>
    <div class="panel-section"><label>BACKGROUND COLOR</label><input type="color" id="bgPicker" value="#05030a"></div>
    <div class="panel-section"><label>CARD SIZE</label><select id="cardSize" style="width:100%;padding:6px;"><option value="small">SMALL</option><option value="medium" selected>MEDIUM</option><option value="large">LARGE</option></select></div>
    <div class="panel-section"><label><input type="checkbox" id="toggleClock" checked> SHOW CLOCK</label><label><input type="checkbox" id="toggleVerse" checked> SHOW VERSE</label></div>
    <div class="panel-section"><label>CUSTOM BANNER TEXT</label><input id="bannerText" placeholder="ENTER TEXT..."></div>
    <button id="resetPrefs" style="width:100%;margin-top:10px;padding:8px;background:#7cff00;border:none;cursor:pointer;">RESET</button>
  </div>
</main>

<footer>
  <div>FOLLOW ME —</div>
  <div class="socials">
    <a href="https://www.youtube.com/@jynxgotaim" target="_blank">YOUTUBE</a>
    <a href="https://www.twitch.tv/jjonzenn" target="_blank">TWITCH</a>
    <a href="https://www.tiktok.com/@fearjnyx_" target="_blank">TIKTOK</a>
  </div>
</footer>

<!-- FOOTER STATS (kept subtle; doesn't change layout) -->
<div style="text-align:center;font-size:12px;margin-top:8px;opacity:0.85">
  Users this month: <span id="month-users">0</span> | Users online now: <span id="online-users">0</span>
</div>

<script>
// ----------------- CORE GAME FILES (kept from earlier safe list) -----------------
const GAME_FILES = [
"1v1lol.html","amanda.html","aquapark.html","bad-parenting-1.html","baldis-basics.html","baseball-bros.html","basket-bros.html","bitlife.html","block-blast.html","bowmasters.html","buildnow-gg.html","clash-of-vikings.html","cuphead-1.html","do-not-take-this-cat-home.html","fears-to-fathom-home-alone.html","flip-master.html","football-bros.html","friday-night-funkin.html","justfall.lol.html","kindergarten.html","kindergarten-2.html","kindergarten-3.html","minecraft-1.21.4.html","retro-bowl.html","run-1.html","run-2.html","run-3.html","schoolboy-runaway.html","slither.io.html","slope.html","sonic-mania.html","sonic-the-hedgehog-2-communitys-cut.html","sonic-the-hedgehog-3-angel-island-remastered.html","sonic.exe.html","steal-brainrot-online.html","stickman-fight-ragdoll.html","stickman-hook.html","subway-surfers-barcelona.html","super-mario-bros.html","supreme-duelist.html"
];

// ----------------- UTIL -----------------
function pad(n){return n.toString().padStart(2,'0')}

// ----------------- LOGIN / SIGNUP STORAGE -----------------
function getUsers(){ try{ return JSON.parse(localStorage.getItem('accounts')||'{}') }catch(e){ return {} } }
function saveUsers(u){ localStorage.setItem('accounts', JSON.stringify(u)) }

// === DEFINE GLOBAL FUNCTIONS USED BY onclick ATTRIBUTES ===
function showSignup(){ document.getElementById('login-screen').classList.add('hidden'); document.getElementById('signup-screen').classList.remove('hidden'); }
function showLogin(){ document.getElementById('signup-screen').classList.add('hidden'); document.getElementById('login-screen').classList.remove('hidden'); }

function attemptSignup(){
  const u = document.getElementById('signup-username').value.trim();
  const p = document.getElementById('signup-password').value.trim();
  if(!u||!p) { alert('Fill everything'); return; }
  const users = getUsers();
  if(users[u]) { alert('Username already exists'); return; }
  users[u]=p; saveUsers(users);
  alert('Account created! Now login.');
  showLogin();
}

function attemptLogin(){
  const u = document.getElementById('login-username').value.trim();
  const p = document.getElementById('login-password').value.trim();
  const users = getUsers();
  const errEl = document.getElementById('login-error');
  if(errEl) errEl.classList.add('hidden');
  if(users[u] && users[u]===p){
    accessGranted(u);
  } else {
    if(errEl){ errEl.classList.remove('hidden'); errEl.textContent = 'WRONG USERNAME OR PASSWORD'; }
    // small shake animation (optional)
    const box = document.querySelector('#login-screen .login-box');
    if(box){ box.animate([{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:240}); }
  }
}

function accessGranted(user){
  // hide overlays
  document.getElementById('login-screen').classList.add('hidden');
  document.getElementById('signup-screen').classList.add('hidden');
  const ag = document.getElementById('access-granted'); if(ag) ag.classList.remove('hidden');

  // update counters
  incrementMonthUsers();
  updateOnlineCount(1);

  setTimeout(()=>{
    if(ag) ag.classList.add('hidden');
    const sc = document.getElementById('site-content'); if(sc) sc.classList.remove('hidden');
  },1400);
}

// ----------------- USER COUNTERS -----------------
function incrementMonthUsers(){
  const now = new Date();
  const key = `month-${now.getFullYear()}-${now.getMonth()+1}`;
  let count = parseInt(localStorage.getItem(key)||'0',10) || 0;
  count++;
  localStorage.setItem(key, String(count));
  const el = document.getElementById('month-users'); if(el) el.textContent = count;
}
function loadMonthUsers(){
  const now = new Date();
  const key = `month-${now.getFullYear()}-${now.getMonth()+1}`;
  const el = document.getElementById('month-users'); if(el) el.textContent = localStorage.getItem(key)||'0';
}
function updateOnlineCount(change){
  // simple tab-counting using localStorage
  let n = parseInt(localStorage.getItem('online-users')||'0',10) || 0;
  n += change;
  if(n<0) n=0;
  localStorage.setItem('online-users', String(n));
  const el = document.getElementById('online-users'); if(el) el.textContent = n;
}
window.addEventListener('beforeunload', ()=>{ updateOnlineCount(-1); });

// ----------------- GAMES UI (rendering minimal, non-destructive) -----------------
const gamesDiv = document.getElementById('games');
function buildCard(fname){
  const card = document.createElement('div'); card.className='game-card';
  const title = fname.replace(/\.html$/,'').replace(/[-\.]/g,' ').toUpperCase();
  card.innerHTML = `<div style="font-size:12px">${title}</div>`;
  const btns = document.createElement('div'); btns.className='card-buttons';
  const play = document.createElement('button'); play.textContent='PLAY'; play.onclick = ()=> { openGameWithLoading(fname); };
  const openb = document.createElement('button'); openb.textContent='ABOUT:BLANK'; openb.onclick = ()=> window.open(fname,'_blank');
  const blob = document.createElement('button'); blob.textContent='BLOB LINK'; blob.onclick = ()=> fetch(fname).then(r=>r.text()).then(t=>{ const b = new Blob([t],{type:'text/html'}); window.open(URL.createObjectURL(b),'_blank'); });
  btns.append(play, openb, blob);
  card.appendChild(btns);
  return card;
}
function renderGames(){ if(!gamesDiv) return; gamesDiv.innerHTML=''; GAME_FILES.forEach(f=> gamesDiv.appendChild(buildCard(f))); }

// ----------------- SIMPLE LOADING BEFORE OPEN -----------------
const LOADER_MESSAGES = [
  'Loading... please wait', 'Warming up sprites', 'Feeding the pixels', 'Charging fun capacitor'
];
function randMsg(){ return LOADER_MESSAGES[Math.floor(Math.random()*LOADER_MESSAGES.length)]; }
async function openGameWithLoading(fname){
  // show a tiny simulated loader overlay (non-blocking)
  const overlay = document.createElement('div'); overlay.style = 'position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:4000;color:#fff';
  const box = document.createElement('div'); box.style = 'padding:18px;border-radius:10px;background:rgba(255,255,255,0.03);text-align:center;max-width:80%';
  box.innerHTML = `<div style="margin-bottom:10px">${randMsg()}</div><div style="height:8px;background:rgba(255,255,255,0.06);border-radius:8px;overflow:hidden"><i id="tmpbar" style="display:block;height:8px;width:0;background:linear-gradient(90deg,var(--neon-blue),var(--neon-green));transition:width .2s"></i></div>`;
  overlay.appendChild(box); document.body.appendChild(overlay);
  const bar = document.getElementById('tmpbar');
  let pct=0; const duration = 900 + Math.random()*1800; const start = Date.now();
  while(Date.now()-start < duration){ pct = Math.min(100, Math.floor(((Date.now()-start)/duration)*100)); if(bar) bar.style.width = pct+'%'; await new Promise(r=>setTimeout(r,80)); }
  if(bar) bar.style.width='100%'; await new Promise(r=>setTimeout(r,200));
  document.body.removeChild(overlay);
  window.open(fname, '_blank');
}

// ----------------- INIT -----------------
(function init(){
  // clear any stale 'online' increment from previous crash: ensure this tab increments only after login
  loadMonthUsers();
  // render games but keep site hidden until login
  renderGames();
  // clear login error on input
  ['login-username','login-password','signup-username','signup-password'].forEach(id=>{
    const el = document.getElementById(id); if(el) el.addEventListener('input', ()=>{ const e = document.getElementById('login-error'); if(e) e.classList.add('hidden'); });
  });
  // show site if preview mode (dev helper)
  try{ const preview = location.search.includes('preview=1') || localStorage.getItem('dev-preview')==='1'; if(preview){ document.getElementById('login-screen').classList.add('hidden'); document.getElementById('signup-screen').classList.add('hidden'); document.getElementById('site-content').classList.remove('hidden'); } }catch(e){}
})();
</script>
</body>
</html>
